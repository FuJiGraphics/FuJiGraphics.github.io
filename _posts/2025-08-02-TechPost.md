---
layout: post
pagination: 
  enabled: true
type: tech
date: 2025-08-02 13:00
category: Blog
title: "[Study] DirectX11 학습 정리"
subtitle: "필기노트"
writer: FuJiGraphics
post-header: false
image: thumnail.png
tags: [Study]
draft : false

---

{% capture img_url %}/assets/blog/{{page.date | date: "%Y-%m-%d"}}-TechPost{% endcapture %}

# [Study] DirectX11 학습 정리

DirectX11 라이브러리를 서적을 통해 학습한 내용을 정리하는 포스팅입니다.

공부한 책을 기준으로 내용들을 정리하여 주기적으로 업데이트할 예정입니다. 





# Practical Rendering and Computation with Direct3D 11

<center>
<img src="{{img_url}}/img_01.png" style="max-width:527px; width:100%;">
<figcaption style="margin-top:-30px;">Practical Rendering and Computation with Direct3D 11 <i><b>(그림 A)</b></i></figcaption>
</center>

https://www.amazon.com/Practical-Rendering-Computation-Direct3D-11/dp/1568817207



## DirectX3D 11의 Resource

<center>
<img src="{{img_url}}/img_02.png" style="max-width:527px; width:100%;">
<figcaption style="margin-top:-30px;">DX11의 Resource 계층 구조 <i><b>(그림 B)</b></i></figcaption>
</center>



### Resource의 특징

- **DirectX11**의 **Resource**는 **Buffer**와 **Texture**로 나뉜다.
- **Resources**는 **Pipeline**에 **연결**되거나 **입력**또는 **출력**에 사용되는 **GPU**를 위한 **메모리 블록**이다. 
- **Resource** 의 **생성**은 **ID3D11Device** 인터페이스를 통해서 생성 가능하다.



### Resource Usage Flags

```c++
enum D3D11_USAGE {
    D3D11_USAGE_DEFAULT,	// GPU Read / Write | CPU X    / X
    D3D11_USAGE_IMMUTABLE,	// GPU Read / X     | CPU X    / X
    D3D11_USAGE_DYNAMIC,	// GPU Read / X		| CPU X    / Wirte
    D3D11_USAGE_STAGING		// GPU Read / Write | CPU Read / Write
}
```

#### D3D11_DEFAULT

**비디오 메모리**에 **유지**할 수 있으므로 리소스에 빠르게 접근 가능



#### D3D11_DYNAMIC

**Frame**마다 바뀔 수 있는 데이터 (변환 행렬)을 **상수 버퍼**로 **GPU**에 전송할 때 사용



#### D3D11_IMMUTABLE

**생성 시점에서 더이상 수정할 수 없는 리소스**이다. = Index Buffer 등



#### D3D11_STAGING

- **GPU**에서 **계산**하고 **CPU**에서 **계산된 데이터를 읽어야할 때** 사용된다. 
- **GPU**에서 **Temp Staging Buffer**에 복사 -> 해당 **Temp Staging Buffer**에서 **CPU**가 **Read**



------



### Resource View

`ResourceView`란, GPU가 **Resource를 어떻게 사용할 건지**에 대한 정의이다. 

#### D3D11RenderTargetView

`Rendering Pipeline`의 결과로 받을 Resource를 의미한다.



#### D3D11DepthStencilView

- **Render Target View**와 다르게 **Depth값**과 **Stencil값**을 받는다. 
- 주로 깊이 판정과 스텐실 판정을 수행하는데 사용된다.



#### D3D11ShaderResourceView

커스텀 가능한 셰이더 단계에서 읽을 수 있는 **Resource**이다.



#### D3D11UnorderedAccessView

**Shader**에서 **Resource**에 대해 **읽기/쓰기**가 가능하다.



------



### Buffer

- **Buffer**는 **CPU**, **GPU**가 **읽고 쓰기** 위한 **메모리 공간**이다.  
- **Buffer**에는 **ResourceView**가 필요한 **Buffer**가 있고 필요하지 않는 **Buffer**가 있다. 
- **Buffer**는 **Byte 단위**로 크기를 기록한다.



#### Vertex Buffer

- **ResourceView**가 필요하지 않다. 
- **Vertex Position, Normal Vector, Texture Coord** 를 포함하는 구조체를 담는 배열이다.
- **데이터**를 여러개의 **정점 버퍼에 나누어 담아서**, **GPU 전송 대역폭을 줄일 수 있다.**
- `Input Assembler`로 **GPU**에 **입력**하거나, `Stream-Output(SO)`에 연결하여 **GPU**로부터 **출력**받을 수 있다.

##### 생성 플래그

- `D3D11_BIND_VERTEX_BUFFER`
  - ``Input Assembler`에 연결
- `D3D11_BIND_STREAM_OUTPUT`
  - `Stream-Output`에 연결

#### Index Buffer

**Vertex Data**를 기반으로 **Primitive를 형성**하는데 필요한 **Index**를 담는 버퍼이다.



#### Constant Buffer

- **셰이더 프로그램 작성 시 접근**할 수 있는 리소스에 대한 버퍼이다.
- `Constant Buffer`의 크기는 반드시 **16바이트의 배수**여야 한다. (**GPU**는 **4-Tuple 레지스터 형식**으로 **버퍼를 효율적으로 처리**하기 때문)



#### Standard Buffer Resource

- **Shader**에 **내장된 데이터 타입**에 맞게 생성하는 **Buffer**이다.
- **원소 별로 고유한 인덱스가 부여**되므로 **Shader**에서는 해당 인덱스를 통해 접근해야한다.
- `ResourcesView`를 통해서 **GPU 파이프라인**과 **연결**해야한다.



#### Standard Structured Buffer Resource

- **Cumtom Data Type**으로 원소를 구성할 수 있는 **Buffer**이다.
- `Constant Buffer`는 구조체 버퍼 한 개, `Structed Buffer`는 구조체 배열을 전송할 수 있다.
- `ResourcesView`를 통해서 **GPU 파이프라인**과 **연결**해야한다.



#### Append/Consume Buffer

- **Buffer**를 **Stack**처럼 사용하게 해주는 리소스 타입이다. 
- 보통 입자 시뮬레이션에 많이 사용된다. (처리된 입자를 **Consume**)



#### Byte Address Buffer

- 고정된 크기의 Index로 접근하는 방식이 아닌, **Byte Offiset(Buffer의 시작 위치와의 거리)을 이용**해서 **데이터에 접근** 할 수 있는 **Buffer**이다.
- 항상 반환되는 데이터는 **4Byte 단위**이다. **Offset** 역시 **4의 배수**여야 한다.
- 생성 시, `MiscFlags` 필드에 `D3D11_RESOURCE_MISC_BUFFER_ALLOW_RAW_VIEWS`를 지정해야한다.



#### Indirect argument buffer

- **렌더링 계산이나 기하구조의 입력 데이터를 GPU가 처리**하고 **저장**하기 위한 **Buffer**이다.
- **CPU**가 `Indirect argument buffer`를 다음 패스로 전달해주는 역할을 맡는다.



------



### Texture

- `Texture`의 **최소 단위는 Pixel**,  `Texel`이라고도 부른다.
- **각 픽셀은 최대 4개의 성분으로 구성**된다.
- **GPU**는 `Texture` 처리 전용 하드웨어가 있다 (**Texture Filtering Hardware : 두 원소를 보간할 때 빠르게 처리**)
- **1, 2, 3차원**으로 되어있으며, 각 **U, V, W의 [0, 1] 범위로 Mapping**된다.



#### Texture Resource Mipmap

- Mipmap은 Texture의 저해상도 버전을 의미한다.
- 해상도가 커도 품질이 나아지지 않는 상황에서 주로 사용된다.
