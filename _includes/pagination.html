<div class="pagination">
    {% if paginator.previous_page %}
        <a href="{{ paginator.previous_page_path }}" class="pagination_button pagination_move_button">&lt;</a>
    {% else %}
        <span class="pagination_button_disable pagination_move_button">&lt;</span>
    {% endif %}

    {% if paginator.page == 1%}
        <span class="pagination_button_select">1</span>
    {% else %}
        <a href="{{ page.dir }}"><span class="pagination_button">1</span></a>
    {% endif %}

    {% assign left_min = paginator.page | minus : 4 %}
    {% assign left_max = paginator.page | minus : 1 %}
    
    {% if left_min > 2 %}
    <span class="pagination_skip">...</span>
    {% endif %}
    
    {% for i in (left_min..left_max) %}
        {% if i >= 2 %}
            <a href="{{ page.dir }}page{{i}}"><span class="pagination_button">{{i}}</span></a>
        {% endif %}
    {% endfor %}

    {% if paginator.page != 1 and paginator.page != paginator.total_pages%}
        <a href="{{ page.dir }}page{{paginator.page}}"><span class="pagination_button_select">{{paginator.page}}</span></a>
    {% endif %}

    {% assign right_min = paginator.page | plus : 1 %}
    {% assign right_max = paginator.page | plus : 4 %}
    {% assign right_threshold = paginator.total_pages | minus : 1 %}

    {% for i in (right_min..right_max) %}
        {% if i < paginator.total_pages %}
            <a href="{{ page.dir }}page{{i}}"><span class="pagination_button">{{i}}</span></a>
        {% endif %}
    {% endfor %}

    {% if right_max < right_threshold %}
        <span class="pagination_skip">...</span>
    {% endif %}

    {% if paginator.total_pages > 1 %}
        {% if paginator.page == paginator.total_pages %}
            <span class="pagination_button_select">{{paginator.total_pages}}</span>
        {% else %}
            <a href="{{ page.dir }}page{{paginator.total_pages}}"><span class="pagination_button">{{paginator.total_pages}}</span></a>
        {% endif %}
    {% endif %}

    {% if paginator.next_page %}
        <a href="{{ paginator.next_page_path }}" class="pagination_button pagination_move_button">&gt;</a>
    {% else %}
        <span class="pagination_button_disable pagination_move_button">&gt;</span>
    {% endif %}

</div>